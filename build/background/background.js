"use strict";function fetchClipboard(){let e=document.getElementById("ta");return e.value="",e.select(),document.execCommand("paste")?e.value.trim():"Unable to fetch from Clipboard"}function runInBackground(e,t,r,o){for(var a of r.specs){let o=new Function("clipboard","url","arrayOrPattern",a.func)(t,a.url,a.arrayOrPattern);if(o){if(!r.autoOpen)return void setBadge("1");if(!(o.length>300)){if(r.prevVisit&&r.prevVisit.prevOpenUrl.trim()==o)setBadge("1");else{chrome.tabs.update(e.id,{url:o});let t={prevVisit:{prevOpenUrl:o,tabId:e.id}};chrome.storage.local.set(t,function(){}),setBadge("")}break}}}}function setBadge(e){chrome.browserAction.setBadgeText({text:e},e=>{})}chrome.tabs.onCreated.addListener(function(e){e.url||chrome.storage.local.get(["specs","autoOpen","prevVisit"],function(t){runInBackground(e,fetchClipboard(),t,this)})}),chrome.tabs.onRemoved.addListener(function(e){chrome.storage.local.get("prevVisit",t=>{t.prevVisit&&t.prevVisit.tabId==e&&chrome.storage.local.remove("prevVisit")}),setBadge("")});